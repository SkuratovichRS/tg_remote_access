<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36 Edg/128.0.0.0" version="24.7.8">
  <diagram name="Страница — 1" id="8RHW3M6nzMlMI29g0lGX">
    <mxGraphModel dx="1425" dy="765" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="p4qJSec3pu2d2igqrVUd-16" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="650" width="610" height="240" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="120" y="100" width="294" height="140" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-3" value="The internet" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="100" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-4" value="" style="rounded=0;whiteSpace=wrap;html=1;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="290" width="500" height="340" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-5" value="Backend" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="230" y="290" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="1f-XYBTSKVgZjsaehHIl-6" target="1f-XYBTSKVgZjsaehHIl-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-6" value="Client" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="120" y="308" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-11" value="Postgres" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeColor=#020208;fillColor=#3399FF;" parent="1" vertex="1">
          <mxGeometry x="615" y="320" width="65" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-14" value="Api" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="259" y="318" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=none;endFill=0;jumpStyle=arc;strokeColor=#33FF33;" edge="1" parent="1" source="1f-XYBTSKVgZjsaehHIl-15">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="460" y="370" as="targetPoint" />
            <Array as="points">
              <mxPoint x="460" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-15" value="RabbitTgConsumer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="259" y="370" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;jumpStyle=arc;strokeColor=#9933FF;" edge="1" parent="1" source="1f-XYBTSKVgZjsaehHIl-17" target="1f-XYBTSKVgZjsaehHIl-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="380" y="430" />
              <mxPoint x="460" y="430" />
              <mxPoint x="460" y="260" />
              <mxPoint x="230" y="260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-17" value="RedisTgConsumer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="259" y="420" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-18" value="ChunksConsumer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="259" y="470" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-19" value="RabbitDbConsumer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="259" y="527" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-21" value="Redis" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeColor=#300A0A;fillColor=#FF6666;" parent="1" vertex="1">
          <mxGeometry x="615" y="420" width="65" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-22" value="Rabbit" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#FF9933;" parent="1" vertex="1">
          <mxGeometry x="615" y="520" width="65" height="80" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-23" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="100" width="290" height="140" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-24" value="Virus" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="150" width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-26" value="Infected host" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="440" y="100" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-27" value="&lt;h1 style=&quot;margin-top: 0px; line-height: 160%;&quot;&gt;&lt;span style=&quot;font-size: 16px; font-weight: 400;&quot;&gt;&amp;nbsp;Command execution pipeine&lt;/span&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;:&lt;/span&gt;&lt;/h1&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;Client &lt;/b&gt;sends request with command to &lt;b&gt;API&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;API &lt;/b&gt;saves the command in &lt;b&gt;Postgres &lt;/b&gt;and publishes it to &lt;b&gt;RabbitMQ&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;RabbitTgConsumer&lt;/b&gt; reads the command from &lt;b&gt;RabbitMQ &lt;/b&gt;and sends it to &lt;b&gt;TgClientApi&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;Virus &lt;/b&gt;processes the command received via &lt;b&gt;TgBotApi &lt;/b&gt;and returns the execution result in chunks&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;RedisTgConsumer &lt;/b&gt;reads the execution result chunks from &lt;b&gt;TgClientApi &lt;/b&gt;and saves them to &lt;b&gt;Redis&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;ChunksConsumer &lt;/b&gt;combines the chunks and publishes the complete result to &lt;b&gt;RabbitMQ&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;- &lt;b&gt;RabbitDbConsumer &lt;/b&gt;reads the complete result from &lt;b&gt;RabbitMQ &lt;/b&gt;and updates command information in &lt;b&gt;Postgres&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;-&amp;nbsp;&lt;b&gt;Client &lt;/b&gt;retrieves and outputs the final result of the command from&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;API&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 160%;&quot;&gt;&lt;span style=&quot;font-size: 16px; background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="650" width="610" height="220" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-44" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;jumpStyle=arc;strokeColor=#B266FF;" parent="1" target="1f-XYBTSKVgZjsaehHIl-25" edge="1" source="1f-XYBTSKVgZjsaehHIl-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="615" y="146" as="sourcePoint" />
            <mxPoint x="355" y="146.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-64" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;fillColor=#dae8fc;strokeColor=#3399FF;jumpStyle=arc;" parent="1" target="1f-XYBTSKVgZjsaehHIl-11" edge="1" source="1f-XYBTSKVgZjsaehHIl-14">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="320" as="sourcePoint" />
            <mxPoint x="520.01" y="320.0799999999999" as="targetPoint" />
            <Array as="points">
              <mxPoint x="590" y="326" />
              <mxPoint x="590" y="360" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;jumpStyle=arc;strokeColor=#FF3333;" edge="1" parent="1" source="1f-XYBTSKVgZjsaehHIl-18" target="1f-XYBTSKVgZjsaehHIl-21">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="480" />
              <mxPoint x="580" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-50" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f5f5f5;strokeColor=#FF3333;jumpStyle=arc;" parent="1" target="1f-XYBTSKVgZjsaehHIl-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="440" as="sourcePoint" />
            <mxPoint x="607.5" y="445" as="targetPoint" />
            <Array as="points">
              <mxPoint x="580" y="440" />
              <mxPoint x="580" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-31" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#f8cecc;strokeColor=#FF9933;endFill=0;edgeStyle=orthogonalEdgeStyle;jumpStyle=arc;" parent="1" target="1f-XYBTSKVgZjsaehHIl-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="340" as="sourcePoint" />
            <mxPoint x="610" y="550" as="targetPoint" />
            <Array as="points">
              <mxPoint x="380" y="341" />
              <mxPoint x="560" y="341" />
              <mxPoint x="560" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-33" value="" style="endArrow=classic;html=1;rounded=0;fillColor=#f8cecc;strokeColor=#FF9933;endFill=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;jumpStyle=arc;" parent="1" target="1f-XYBTSKVgZjsaehHIl-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="390" as="sourcePoint" />
            <mxPoint x="520" y="520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="560" y="390" />
              <mxPoint x="560" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-57" value="" style="endArrow=classic;html=1;rounded=0;fillColor=#f8cecc;strokeColor=#FF9933;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;jumpStyle=arc;" parent="1" target="1f-XYBTSKVgZjsaehHIl-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="549.35" as="sourcePoint" />
            <mxPoint x="560" y="550" as="targetPoint" />
            <Array as="points">
              <mxPoint x="560" y="550" />
              <mxPoint x="560" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF9933;" edge="1" parent="1" source="1f-XYBTSKVgZjsaehHIl-18" target="1f-XYBTSKVgZjsaehHIl-22">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="490" />
              <mxPoint x="560" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;jumpStyle=arc;strokeColor=#3399FF;" edge="1" parent="1" source="1f-XYBTSKVgZjsaehHIl-19" target="1f-XYBTSKVgZjsaehHIl-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="590" y="535" />
              <mxPoint x="590" y="360" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="p4qJSec3pu2d2igqrVUd-13" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="177" y="150" width="200" height="55" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-8" value="TgClientApi" style="rounded=0;whiteSpace=wrap;html=1;" parent="p4qJSec3pu2d2igqrVUd-13" vertex="1">
          <mxGeometry width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="1f-XYBTSKVgZjsaehHIl-25" value="TgBotApi" style="rounded=0;whiteSpace=wrap;html=1;" parent="p4qJSec3pu2d2igqrVUd-13" vertex="1">
          <mxGeometry x="100" width="100" height="55" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
